# Testing paradigms

Our project implements two testing paradigms: <code>unit testing</code> and <code>end-to-end testing</code>.

## Unit testing
- The Koala side of our project has unit tests in the <code>test</code> directroy. These unit tests also run in the CI pipeline, when building the Koala docker image
- The Eucalypt side of our project has unit tests in the <code>eucalypt/node-api/\_\_tests\_\_</code> directory

## End-to-end testing
- Verifies that the infrastructure can be brought up correctly
- Simulates *a plethora* of workloads on the infrastructure:
    - Runs all code samples (sample.cpp, word_counter.cpp, real_estate.cpp, genomic_sample.cpp)
    - Verifies their output against output collected from correct, single-threaded Python solutions
    - Runs the samples in multiple cluster configurations:
        - Different cluster sizes (testsing lower/higher contention on the Master node)
        - Worker failure percentage (testing the fault tolerance aspects of the infrastructure)
    - Runs the samples in multiple user modes:
        - Guest (no job token)
        - User (job tokens generated by Eucalypt)
    - Logs generated by the different processes are checked so as to confirm normal service interactions
- Results from a comprehensive end-to-end testing session comprising 100 tests (also available raw at <code>e2e-tests/results</code>):
```
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-7.4.4, pluggy-1.4.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/cristi/Desktop/uni/is/proiect-inginerie-software-shark-rockets/e2e-tests
collecting ... collected 100 items

test_computation.py::test_run_jobs[guest-4-UserExecutable.SAMPLE] PASSED [  1%]
test_computation.py::test_run_jobs[guest-4-UserExecutable.WORD_COUNTER] PASSED [  2%]
test_computation.py::test_run_jobs[guest-4-UserExecutable.REAL_ESTATE] PASSED [  3%]
test_computation.py::test_run_jobs[guest-4-UserExecutable.GENOMIC_SAMPLE] PASSED [  4%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination0] PASSED [  5%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination1] PASSED [  6%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination2] PASSED [  7%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination3] PASSED [  8%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination4] PASSED [  9%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination5] PASSED [ 10%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination6] PASSED [ 11%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination7] PASSED [ 12%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination8] PASSED [ 13%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination9] PASSED [ 14%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination10] PASSED [ 15%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination11] PASSED [ 16%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination12] PASSED [ 17%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination13] PASSED [ 18%]
test_computation.py::test_run_multiple_jobs[guest-4-job_combination14] PASSED [ 19%]
test_computation.py::test_sample_correctness[guest-4] PASSED             [ 20%]
test_computation.py::test_wc_correctness[guest-4] PASSED                 [ 21%]
test_computation.py::test_real_estate_correctness[guest-4] PASSED        [ 22%]
test_computation.py::test_genomic_sample_correctness[guest-4] PASSED     [ 23%]
test_computation.py::test_run_jobs_unstable[guest-unstable_worker_cluster0-UserExecutable.SAMPLE] PASSED [ 24%]
test_computation.py::test_run_jobs_unstable[guest-unstable_worker_cluster0-UserExecutable.WORD_COUNTER] PASSED [ 25%]
test_computation.py::test_run_jobs_unstable[guest-unstable_worker_cluster0-UserExecutable.REAL_ESTATE] PASSED [ 26%]
test_computation.py::test_run_jobs_unstable[guest-unstable_worker_cluster0-UserExecutable.GENOMIC_SAMPLE] PASSED [ 27%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination0] PASSED [ 28%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination1] PASSED [ 29%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination2] PASSED [ 30%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination3] PASSED [ 31%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination4] PASSED [ 32%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination5] PASSED [ 33%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination6] PASSED [ 34%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination7] PASSED [ 35%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination8] PASSED [ 36%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination9] PASSED [ 37%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination10] PASSED [ 38%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination11] PASSED [ 39%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination12] PASSED [ 40%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination13] PASSED [ 41%]
test_computation.py::test_run_multiple_jobs_unstable[guest-unstable_worker_cluster0-job_combination14] PASSED [ 42%]
test_computation.py::test_sample_correctness_unstable[guest-unstable_worker_cluster0] PASSED [ 43%]
test_computation.py::test_wc_correctness_unstable[guest-unstable_worker_cluster0] PASSED [ 44%]
test_computation.py::test_real_estate_correctness_unstable[guest-unstable_worker_cluster0] PASSED [ 45%]
test_computation.py::test_genomic_sample_correctness_unstable[guest-unstable_worker_cluster0] PASSED [ 46%]
test_computation.py::test_run_jobs[test_user-4-UserExecutable.SAMPLE] PASSED [ 47%]
test_computation.py::test_run_jobs[test_user-4-UserExecutable.WORD_COUNTER] PASSED [ 48%]
test_computation.py::test_run_jobs[test_user-4-UserExecutable.REAL_ESTATE] PASSED [ 49%]
test_computation.py::test_run_jobs[test_user-4-UserExecutable.GENOMIC_SAMPLE] PASSED [ 50%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination0] PASSED [ 51%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination1] PASSED [ 52%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination2] PASSED [ 53%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination3] PASSED [ 54%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination4] PASSED [ 55%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination5] PASSED [ 56%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination6] PASSED [ 57%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination7] PASSED [ 58%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination8] PASSED [ 59%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination9] PASSED [ 60%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination10] PASSED [ 61%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination11] PASSED [ 62%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination12] PASSED [ 63%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination13] PASSED [ 64%]
test_computation.py::test_run_multiple_jobs[test_user-4-job_combination14] PASSED [ 65%]
test_computation.py::test_sample_correctness[test_user-4] PASSED         [ 66%]
test_computation.py::test_wc_correctness[test_user-4] PASSED             [ 67%]
test_computation.py::test_real_estate_correctness[test_user-4] PASSED    [ 68%]
test_computation.py::test_genomic_sample_correctness[test_user-4] PASSED [ 69%]
test_computation.py::test_run_jobs_unstable[test_user-unstable_worker_cluster0-UserExecutable.SAMPLE] PASSED [ 70%]
test_computation.py::test_run_jobs_unstable[test_user-unstable_worker_cluster0-UserExecutable.WORD_COUNTER] PASSED [ 71%]
test_computation.py::test_run_jobs_unstable[test_user-unstable_worker_cluster0-UserExecutable.REAL_ESTATE] PASSED [ 72%]
test_computation.py::test_run_jobs_unstable[test_user-unstable_worker_cluster0-UserExecutable.GENOMIC_SAMPLE] PASSED [ 73%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination0] PASSED [ 74%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination1] PASSED [ 75%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination2] PASSED [ 76%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination3] PASSED [ 77%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination4] PASSED [ 78%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination5] PASSED [ 79%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination6] PASSED [ 80%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination7] PASSED [ 81%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination8] PASSED [ 82%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination9] PASSED [ 83%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination10] PASSED [ 84%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination11] PASSED [ 85%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination12] PASSED [ 86%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination13] PASSED [ 87%]
test_computation.py::test_run_multiple_jobs_unstable[test_user-unstable_worker_cluster0-job_combination14] PASSED [ 88%]
test_computation.py::test_sample_correctness_unstable[test_user-unstable_worker_cluster0] PASSED [ 89%]
test_computation.py::test_wc_correctness_unstable[test_user-unstable_worker_cluster0] PASSED [ 90%]
test_computation.py::test_real_estate_correctness_unstable[test_user-unstable_worker_cluster0] PASSED [ 91%]
test_computation.py::test_genomic_sample_correctness_unstable[test_user-unstable_worker_cluster0] PASSED [ 92%]
test_fault_tolerance.py::test_master_notices_dead_worker PASSED          [ 93%]
test_smoke.py::test_master_listening PASSED                              [ 94%]
test_smoke.py::test_multiple_workers[1] PASSED                           [ 95%]
test_smoke.py::test_multiple_workers[2] PASSED                           [ 96%]
test_smoke.py::test_multiple_workers[5] PASSED                           [ 97%]
test_smoke.py::test_multiple_workers[10] PASSED                          [ 98%]
test_smoke.py::test_multiple_workers[100] PASSED                         [ 99%]
test_smoke.py::test_cluster[4] PASSED                                    [100%]

======================= 100 passed in 1068.35s (0:17:48) =======================
```
